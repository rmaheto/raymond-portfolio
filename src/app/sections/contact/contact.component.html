<section id="contact" class="section container-xl py-12 mb-12">
    <h2 class="heading-2 text-slate-600 dark:text-slate-300/95">Get In Touch</h2>

    <div class="mt-8 grid md:grid-cols-2 gap-6">
        <!-- left card -->
        <div class="card p-6 text-slate-300">
            <p>
                {{p.contactIntro}}
            </p>
            <ul class="mt-6 space-y-3">
                <!-- Email -->
                <li *ngIf="p.links.email" class="flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-red-500" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 
               1.1.9 2 2 2h16c1.1 0 2-.9 
               2-2V6c0-1.1-.9-2-2-2zm0 
               4-8 5-8-5V6l8 5 8-5v2z" />
                    </svg>
                    <a class="underline" [href]="'mailto:' + p.links.email">{{ p.links.email }}</a>
                </li>

                <!-- LinkedIn -->
                <li *ngIf="p.links.linkedin" class="flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path d="M4.98 3.5C4.98 4.88 
               3.87 6 2.5 6S0 4.88 
               0 3.5 1.12 1 2.5 1s2.48 
               1.12 2.48 2.5zM.5 8h4V24h-4V8zm7 
               0h3.7v2.3h.1c.5-.9 
               1.8-1.8 3.6-1.8 
               3.9 0 4.6 2.6 
               4.6 6v9.5h-4v-8.5c0-2 
               0-4.5-2.7-4.5-2.7 
               0-3.1 2.1-3.1 4.3V24h-4V8z" />
                    </svg>
                    <a class="underline" [href]="p.links.linkedin" target="_blank">
                        {{ p.linksDisplay.linkedin }}
                    </a>
                </li>

                <!-- GitHub -->
                <li *ngIf="p.links.github" class="flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-slate-700 dark:text-slate-200"
                        fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 0C5.37 0 0 5.37 
               0 12c0 5.3 3.44 9.8 
               8.21 11.39.6.11.82-.26.82-.58 
               0-.29-.01-1.05-.02-2.05-3.34.73-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.1-.75.08-.74.08-.74 
               1.21.09 1.84 1.24 1.84 1.24 
               1.08 1.84 2.84 1.31 
               3.54 1 .11-.78.42-1.31.76-1.61-2.67-.3-5.47-1.34-5.47-5.97 
               0-1.32.47-2.39 1.24-3.23-.13-.3-.54-1.52.12-3.18 0 0 1-.32 3.3 
               1.23a11.45 11.45 0 0 1 3-.4c1.02 0 2.05.14 3 
               .4 2.3-1.55 3.3-1.23 
               3.3-1.23.66 1.66.25 2.88.12 
               3.18.77.84 1.24 1.91 1.24 
               3.23 0 4.64-2.81 5.66-5.49 
               5.96.43.37.81 1.1.81 2.22 
               0 1.6-.01 2.88-.01 3.27 
               0 .32.22.69.83.57A12.01 
               12.01 0 0 0 24 12c0-6.63-5.37-12-12-12z" />
                    </svg>
                    <a class="underline" [href]="p.links.github" target="_blank">
                        {{ p.linksDisplay.github }}
                    </a>
                </li>

                <!-- Facebook-->
                <li *ngIf="p.links.facebook" class="flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600 dark:text-blue-400"
                        viewBox="0 0 24 24" fill="currentColor">
                        <path d="M22.675 0h-21.35C.597 0 0 
               .597 0 1.325v21.351C0 23.403.597 
               24 1.325 24h11.495v-9.294H9.691v-3.622h3.129V8.413
               c0-3.1 1.893-4.788 4.659-4.788 
               1.325 0 2.463.099 2.794.143v3.24l-1.918.001
               c-1.504 0-1.796.716-1.796 1.765v2.316h3.587
               l-.467 3.622h-3.12V24h6.116
               C23.403 24 24 23.403 24 22.676V1.325
               C24 .597 23.403 0 22.675 0z" />
                    </svg>
                    <a class="underline" [href]="p.links.facebook" target="_blank">
                        {{ p.linksDisplay.facebook }}
                    </a>
                </li>

                <li *ngIf="p.links.instagram" class="flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-pink-500" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path d="M7 2C4.243 2 2 4.243 2 
                 7v10c0 2.757 2.243 5 5 
                 5h10c2.757 0 5-2.243 5-5V7c0-2.757-2.243-5-5-5H7zm0 
                 2h10c1.654 0 3 1.346 3 
                 3v10c0 1.654-1.346 3-3 
                 3H7c-1.654 0-3-1.346-3-3V7c0-1.654 
                 1.346-3 3-3zm5 
                 2c-2.757 0-5 2.243-5 
                 5s2.243 5 5 5 5-2.243 
                 5-5-2.243-5-5-5zm0 
                 2a3 3 0 1 1 0 6 3 3 0 0 
                 1 0-6zm6.5-.25a1.25 1.25 0 
                 1 0 0 2.5 1.25 1.25 0 0 
                 0 0-2.5z" />
                    </svg>
                    <a class="underline" [href]="p.links.instagram" target="_blank">
                        {{ p.linksDisplay.instagram }}
                    </a>
                </li>
                <li *ngIf="p.links.twitter" class="flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-sky-500" fill="currentColor"
                        viewBox="0 0 24 24">
                        <path d="M23 3a10.9 10.9 0 0 
                 1-3.14 1.53A4.48 4.48 0 0 
                 0 22.4.36a9.09 9.09 0 0 
                 1-2.88 1.1A4.52 4.52 0 0 
                 0 16.11 0c-2.63 0-4.77 
                 2.14-4.77 4.77 0 .37.04.74.12 
                 1.09-3.96-.2-7.48-2.1-9.84-4.99a4.77 
                 4.77 0 0 0-.65 2.4c0 1.65.84 
                 3.11 2.13 3.97A4.48 4.48 0 0 
                 1 1 6.1v.05c0 2.3 1.63 4.22 
                 3.8 4.65a4.52 4.52 0 0 
                 1-2.14.08c.6 1.87 2.33 3.24 
                 4.38 3.28A9.05 9.05 0 0 1 0 
                 19.54 12.8 12.8 0 0 0 6.92 
                 21c8.3 0 12.84-6.87 12.84-12.84 
                 0-.2 0-.41-.02-.61A9.2 9.2 0 0 
                 0 23 3z" />
                    </svg>
                    <a class="underline" [href]="p.links.twitter" target="_blank">
                        {{ p.linksDisplay.twitter }}
                    </a>
                </li>
            </ul>

        </div>

        <!-- FORM -->
        <form class="card p-6 space-y-4" #f="ngForm" (ngSubmit)="submit(f)">
            <div class="grid md:grid-cols-2 gap-4">
                <!-- Name -->
                <div>
                    <input name="name" ngModel required #name="ngModel" placeholder="Name"
                        class="w-full rounded-md p-3 bg-white border text-slate-900 placeholder:text-slate-400 dark:bg-white/5 dark:border-white/10 dark:text-white"
                        [class.border-red-500]="
              name.invalid && (name.touched || f.submitted)
            " />
                    <p class="mt-1 text-xs text-red-500"
                        *ngIf="name.errors?.['required'] && (name.touched || f.submitted)">
                        Name is required.
                    </p>
                </div>

                <!-- Email -->
                <div>
                    <input name="email" ngModel required email #email="ngModel" type="email" placeholder="Email"
                        class="w-full rounded-md p-3 bg-white border text-slate-900 placeholder:text-slate-400 dark:bg-white/5 dark:border-white/10 dark:text-white"
                        [class.border-red-500]="
              email.invalid && (email.touched || f.submitted)
            " />
                    <p class="mt-1 text-xs text-red-500"
                        *ngIf="email.errors?.['required'] && (email.touched || f.submitted)">
                        Email is required.
                    </p>
                    <p class="mt-1 text-xs text-red-500"
                        *ngIf="email.errors?.['email'] && (email.touched || f.submitted)">
                        Please enter a valid email address.
                    </p>
                </div>
            </div>

            <!-- Subject -->
            <div>
                <input name="subject" ngModel required #subject="ngModel" placeholder="Subject"
                    class="w-full rounded-md p-3 bg-white border text-slate-900 placeholder:text-slate-400 dark:bg-white/5 dark:border-white/10 dark:text-white"
                    [class.border-red-500]="
            subject.invalid && (subject.touched || f.submitted)
          " />
                <p class="mt-1 text-xs text-red-500"
                    *ngIf="subject.errors?.['required'] && (subject.touched || f.submitted)">
                    Subject is required.
                </p>
            </div>

            <!-- Message -->
            <div>
                <textarea name="message" ngModel required minlength="10" [maxlength]="maxMessageLength"
                    #message="ngModel" rows="5" placeholder="Message" aria-describedby="messageCounter" class="w-full rounded-md p-3 bg-white border text-slate-900
           placeholder:text-slate-400 dark:bg-white/5 dark:border-white/10 dark:text-white"
                    [class.border-red-500]="message.invalid && (message.touched || f.submitted)">
  </textarea>

                <!-- Errors -->
                <p class="mt-1 text-xs text-red-500"
                    *ngIf="message.errors?.['required'] && (message.touched || f.submitted)">
                    Message is required.
                </p>
                <p class="mt-1 text-xs text-red-500"
                    *ngIf="message.errors?.['minlength'] && (message.touched || f.submitted)">
                    Message must be at least 10 characters.
                </p>

                <!-- Character counter (remaining) -->
                <p id="messageCounter" class="mt-1 text-xs text-right"
                    [class.text-slate-400]="(maxMessageLength - (message.value?.length || 0)) > warnAt"
                    [class.text-amber-400]="(maxMessageLength - (message.value?.length || 0)) <= warnAt && (maxMessageLength - (message.value?.length || 0)) > dangerAt"
                    [class.text-red-500]="(maxMessageLength - (message.value?.length || 0)) <= dangerAt">
                    {{ maxMessageLength - (message.value?.length || 0) }} characters left
                    <span class="text-slate-500">/ {{ maxMessageLength }}</span>
                </p>
            </div>


            <!-- reCAPTCHA + button -->
            <div class="flex flex-col items-center space-y-4">
                <div class="recaptcha-container">
                    <re-captcha [siteKey]="siteKey" (resolved)="onResolved($event)">
                    </re-captcha>
                </div>


                <button type="submit"
                    class="btn-primary w-full md:w-auto disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
                    [disabled]="f.invalid || !captchaToken || loading">

                    <!-- Normal -->
                    <span *ngIf="!loading">Send Message</span>

                    <!-- With spinner -->
                    <ng-container *ngIf="loading">
                        <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 24 24">
                            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4">
                            </circle>
                            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
                        </svg>
                        <span>Submitting…</span>
                    </ng-container>
                </button>

            </div>
        </form>
    </div>
</section>